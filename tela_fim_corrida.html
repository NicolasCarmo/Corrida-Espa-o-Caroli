<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Corrida Finalizada</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>🎉 Parabéns, corredor!</h1>
      <p>Você concluiu sua corrida. Aqui estão seus dados:</p>
    </header>

    <main class="tracking-interface" id="resultado"></main>

    <div class="finish-buttons">
      <button onclick="window.location.href='tela_corrida_opcoes.html'" class="big-button">🏁 Voltar ao Menu</button>
      <button onclick="window.location.href='tela_corrida.html'" class="big-button">🔁 Nova Corrida</button>
    </div>
  </div>

  <script type="module">
    const currentUser = JSON.parse(localStorage.getItem("runtracker_current"));
    const users = JSON.parse(localStorage.getItem("runtracker_users")) || [];
    const user = users.find(u => u.email === currentUser?.email);

    const resultadoDiv = document.getElementById("resultado");

    if (!user || !user.activities || user.activities.length === 0) {
      resultadoDiv.innerHTML = "<p>Nenhuma corrida registrada.</p>";
    } else {
      const ultima = user.activities[user.activities.length - 1];

      resultadoDiv.innerHTML = `
        <div class="user-card">
          <p><strong>📅 Data:</strong> ${ultima.date}</p>
          <p><strong>⏱️ Duração:</strong> ${ultima.duration}</p>
          <p><strong>📏 Distância:</strong> ${ultima.distance} km</p>
          <p><strong>🏃 Ritmo:</strong> ${ultima.pace}</p>
          <p><strong>🔥 Intensidade:</strong> ${ultima.intensity || '--'}</p>
        </div>
      `;
    }
  </script>
</body>
</html>
